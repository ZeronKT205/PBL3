<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment | Zeron</title>
    <link rel = "stylesheet" href = "../assets/css/Payment.css">
    <link rel = "stylesheet" href = "../assets/css/style.css">
</head>
<body>
    <div class="container">
        <!--NAVBAR -->
    <nav class="navbar">
        <div class="navbar__logo">
            <img src="../assets/images/logo.png" alt="logo" class="navbar__logo-item">
            <span class = "navbar__logo-name">Zeron</span>
        </div>
        <ul class="navbar__content">
            <li><a href = "../FE/home.html" class="navbar__content-item1">TRANG CHỦ</a></li>
            <li><a href = "../FE/bookingTicket.html" class="navbar__content-item1">ĐẶT VÉ</a></li>
        </ul>
    </nav>
    <!--END NAVBAR -->
    <!-- Nội dung của page ở đây -->
    <div class="container payment-container">
        <!-- Header thanh toán -->
        <div class="payment-header">
            <img src="../assets/images/vnpay-logo.jpg" alt="VNPay Logo" class="vnpay-header-logo">
            <span class="payment-header-title">Thanh toán VNPay</span>
        </div>

        <!-- Main content -->
        <div class="payment-main">
            <!-- Box chi tiết vé -->
            <div class="payment-ticket-box">
                <div class="ticket-bill-title">HÓA ĐƠN THANH TOÁN</div>
                <div class="ticket-bill-list">
                    <div class="ticket-bill-row"><span class="bill-label">Phim:</span> <span class="bill-value">Vòng Tròn Oan Nghiệt</span></div>
                    <div class="ticket-bill-row"><span class="bill-label">Suất chiếu:</span> <span class="bill-value">22/10/2025 - 19:30</span></div>
                    <div class="ticket-bill-row"><span class="bill-label">Phòng chiếu:</span> <span class="bill-value">Rạp 3</span></div>
                    <div class="ticket-bill-row"><span class="bill-label">Ghế:</span> <span class="bill-value">D5, D6</span></div>
                    <div class="ticket-bill-row"><span class="bill-label">Số lượng vé:</span> <span class="bill-value">2</span></div>
                    <div class="ticket-bill-row"><span class="bill-label">Giá mỗi vé:</span> <span class="bill-value">100.000 VNĐ</span></div>
                    <div class="ticket-bill-row"><span class="bill-label">Tạm tính vé:</span> <span class="bill-value" id="bill-ticket-total">200.000 VNĐ</span></div>
                    <div class="ticket-bill-row bill-addon-title"><span class = "product-title"><i class="fa fa-utensils bill-icon"></i>Đồ ăn & Đồ uống đi kèm:</span></div>
                    <div class="ticket-bill-addon-list"></div>
                    <div class="ticket-bill-row bill-total"><span class="bill-label"><i class="fa fa-receipt bill-icon"></i>Tổng cộng:</span> <span class="bill-value" id="bill-grand-total">200.000 VNĐ</span></div>
                </div>
            </div>
            <!-- Box chi tiết thanh toán -->
            <div class="payment-detail-box">
                <div class="payment-detail-row"><span class="payment-detail-label">Tổng tiền:</span> <span class="payment-detail-value payment-amount">200.000 VNĐ</span></div>
                <div class="payment-detail-row"><span class="payment-detail-label">Phí giao dịch:</span> <span class="payment-detail-value">Miễn phí</span></div>
                <div class="payment-detail-row"><span class="payment-detail-label">Mã đơn hàng:</span> <span class="payment-detail-value">#123456789</span></div>
                <div class="payment-detail-row"><span class="payment-detail-label">Email:</span> <span class="payment-detail-value">user@email.com</span></div>
                <!-- Sản phẩm bắp nước đi kèm -->
                <div class="addon-section">
                    <div class="addon-title">Chọn bắp nước đi kèm</div>
                    <div class="addon-list">
                        <div class="addon-item" data-name="Bắp ngọt lớn" data-price="40000">
                            <img src="../assets/images//Product/combo1.png" alt="Bắp" class="addon-img">
                            <div class="addon-info">
                                <div class="addon-name">Bắp ngọt lớn</div>
                                <div class="addon-price">40.000 VNĐ</div>
                            </div>
                            <div class="addon-qty-group">
                                <button class="addon-qty-btn addon-qty-minus">-</button>
                                <span class="addon-qty-value">0</span>
                                <button class="addon-qty-btn addon-qty-plus">+</button>
                            </div>
                        </div>
                        <div class="addon-item" data-name="Coca-Cola 500ml" data-price="25000">
                            <img src="../assets/images//Product/combo2.jpg" alt="Coca" class="addon-img">
                            <div class="addon-info">
                                <div class="addon-name">Coca-Cola 500ml</div>
                                <div class="addon-price">25.000 VNĐ</div>
                            </div>
                            <div class="addon-qty-group">
                                <button class="addon-qty-btn addon-qty-minus">-</button>
                                <span class="addon-qty-value">0</span>
                                <button class="addon-qty-btn addon-qty-plus">+</button>
                            </div>
                        </div>
                        <div class="addon-item" data-name="Combo 1 bắp + 2 nước" data-price="75000">
                            <img src="../assets/images//Product/combo4.jpg" alt="Combo" class="addon-img">
                            <div class="addon-info">
                                <div class="addon-name">Combo 1 bắp + 2 nước</div>
                                <div class="addon-price">75.000 VNĐ</div>
                            </div>
                            <div class="addon-qty-group">
                                <button class="addon-qty-btn addon-qty-minus">-</button>
                                <span class="addon-qty-value">0</span>
                                <button class="addon-qty-btn addon-qty-plus">+</button>
                            </div>
                        </div>
                        <div class="addon-item" data-name="Combo 1 bắp + 2 nước (VIP)" data-price="95000">
                            <img src="../assets/images//Product/combo3.jpg" alt="Combo" class="addon-img">
                            <div class="addon-info">
                                <div class="addon-name">Combo 1 bắp + 2 nước (VIP)</div>
                                <div class="addon-price">95.000 VNĐ</div>
                            </div>
                            <div class="addon-qty-group">
                                <button class="addon-qty-btn addon-qty-minus">-</button>
                                <span class="addon-qty-value">0</span>
                                <button class="addon-qty-btn addon-qty-plus">+</button>
                            </div>
                        </div>
                        <!-- Thêm nhiều sản phẩm nếu muốn -->
                    </div>
                </div>
                <div class="addon-selected-list"></div>
            </div>
        </div>
        <!-- Nút thanh toán -->
        <div class="payment-btn-wrap">
            <button class="btn-vnpay-full">
                Thanh toán với VNPay
            </button>
        </div>
    </div>

    
</div>
 <footer>
    <div class = "container__footer">
        <h3>Ký ức đẹp bắt đầu từ một bộ phim hay!</h3>
    </div>
    <div class="footercontent">
        <div class="navbar__logo navbar__logo2">
            <img src="assets/images/logo.png" alt="logo" class="navbar__logo-item">
            <span class = "navbar__logo-name">Zeron</span>
        </div>
        <ul class="footercontent__ContactInf">
            <li><p class = "footercontent__header">Hỗ Trợ</p></li>
            <li>
                <div class="footercontent__ContactInf-list">
                    <i class="fa-solid fa-phone"></i>
                    <p>0948 203 816</p>
                </div>
            </li>
            <li>
                <div class="footercontent__ContactInf-list">
                    <i class="fa-solid fa-envelope"></i>
                    <p>zeron_cinema@gmail.com</p>
                </div>
            </li>
            <li>
                <div class="footercontent__ContactInf-list">
                    <i class="fa-solid fa-location-dot"></i>
                    <p>Số 16 Nguyễn Lương Bằng, Hòa Khánh Bắc, Đà Nẵng</p>
                </div>
            </li>
        </ul>
        <ul class="footercontent__QuickLink">
            <li><p class = "footercontent__header">Liên Kết Nhanh</p></li>
            <li><a class = "footercontent__QuickLink-list" href ="##">Trang Chủ</a></li>
            <li><a class = "footercontent__QuickLink-list" href ="##">Đặt Vé</a></li>
            <li><a class = "footercontent__QuickLink-list" href ="##">Thể Loại</a></li>
        </ul>
        <ul class="footercontent__SocialMedia">
            <p class = "footercontent__header">Mạng Xã Hội</p></li>
            <div class = "footercontent__SocialMedia-list">
                <a href="https://facebook.com" target="_blank"><i class="fa-brands fa-facebook fa-2x"></i></a>
                <a href="https://instagram.com" target="_blank"><i class="fa-brands fa-instagram fa-2x"></i></a>
                <a href="https://zalo.me" target="_blank"><i class="fa-solid fa-comment-dots fa-2x"></i></a>
            </div>
        </ul>
        <div><p class = "line"></p></div>
    </div>
 </footer>
<script>
// Xử lý chọn sản phẩm bắp nước
(function() {
    const addonItems = document.querySelectorAll('.addon-item');
    const selectedList = document.querySelector('.addon-selected-list');
    const totalElem = document.querySelector('.payment-amount');
    // Thêm các phần tử hóa đơn
    const billAddonList = document.querySelector('.ticket-bill-addon-list');
    const billGrandTotal = document.getElementById('bill-grand-total');
    const billTicketTotal = document.getElementById('bill-ticket-total');
    let baseTotal = 200000;
    let selectedProducts = [];

    function formatVND(val) {
        return val.toLocaleString('vi-VN') + ' VNĐ';
    }

    function updateSelectedList() {
        selectedList.innerHTML = '';
        billAddonList.innerHTML = '';
        if (selectedProducts.length > 0) {
            selectedList.innerHTML = '<div class="addon-selected-title">Đã chọn:</div>';
            selectedProducts.forEach(prod => {
                // Cập nhật hóa đơn: tên món, số lượng, giá
                const billRow = document.createElement('div');
                billRow.className = 'ticket-bill-row bill-addon-row';
                billRow.innerHTML = `<span class='bill-label'>${prod.name} x${prod.qty}</span> <span class='bill-value'>${formatVND(prod.price * prod.qty)}</span>`;
                billAddonList.appendChild(billRow);
                // Cập nhật danh sách đã chọn
                const item = document.createElement('div');
                item.className = 'addon-selected-item';
                item.innerHTML = `<span>${prod.name} x${prod.qty}</span> <span class='addon-selected-price'>${formatVND(prod.price * prod.qty)}</span> <button class='addon-remove-btn styled-remove' data-name='${prod.name}'>✕</button>`;
                selectedList.appendChild(item);
            });
        }
    }

    function updateTotal() {
        let total = baseTotal;
        selectedProducts.forEach(prod => total += prod.price * prod.qty);
        totalElem.textContent = formatVND(total);
        billGrandTotal.textContent = formatVND(total);
        billTicketTotal.textContent = formatVND(baseTotal);
    }

    addonItems.forEach(item => {
        const name = item.getAttribute('data-name');
        const price = parseInt(item.getAttribute('data-price'));
        const minusBtn = item.querySelector('.addon-qty-minus');
        const plusBtn = item.querySelector('.addon-qty-plus');
        const qtyValue = item.querySelector('.addon-qty-value');

        plusBtn.addEventListener('click', function() {
            let prod = selectedProducts.find(p => p.name === name);
            if (!prod) {
                prod = {name, price, qty: 1};
                selectedProducts.push(prod);
            } else {
                prod.qty++;
            }
            qtyValue.textContent = prod.qty;
            updateSelectedList();
            updateTotal();
        });
        minusBtn.addEventListener('click', function() {
            let prod = selectedProducts.find(p => p.name === name);
            if (prod && prod.qty > 0) {
                prod.qty--;
                if (prod.qty === 0) {
                    selectedProducts = selectedProducts.filter(p => p.name !== name);
                }
                qtyValue.textContent = prod.qty > 0 ? prod.qty : 0;
                updateSelectedList();
                updateTotal();
            }
        });
    });

    selectedList.addEventListener('click', function(e) {
        if (e.target.classList.contains('addon-remove-btn')) {
            const name = e.target.getAttribute('data-name');
            selectedProducts = selectedProducts.filter(p => p.name !== name);
            // Reset số lượng về 0
            document.querySelectorAll('.addon-item').forEach(item => {
                if (item.getAttribute('data-name') === name) {
                    item.querySelector('.addon-qty-value').textContent = '0';
                }
            });
            updateSelectedList();
            updateTotal();
        }
    });
    // Khởi tạo hóa đơn ban đầu
    updateSelectedList();
    updateTotal();
})();
</script>
</body>
</html>